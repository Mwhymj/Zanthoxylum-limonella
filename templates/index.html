<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåø ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500&family=Sarabun:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #1b5e20; --primary-light: #2e7d32; --secondary: #ffc107; --bg: #f8faf8; }
        body { font-family: 'Kanit', sans-serif; margin: 0; background: var(--bg); color: #333; scroll-behavior: smooth; }
        
        /* Hero Section */
        .hero { 
            background: linear-gradient(rgba(27, 94, 32, 0.8), rgba(27, 94, 32, 0.8)), 
                        url('https://images.unsplash.com/photo-1500651230702-0e2d8a49d4ad?auto=format&fit=crop&w=1350&q=80');
            background-size: cover; background-position: center; background-attachment: fixed;
            color: white; padding: 120px 20px; text-align: center;
        }
        .hero h1 { font-size: 3.5rem; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .hero p { font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px; font-family: 'Sarabun'; }
        
        /* Search System */
        .search-container { position: relative; max-width: 600px; margin: 0 auto; }
        .search-bar { 
            padding: 18px 30px; width: 100%; border-radius: 50px; border: none; 
            font-size: 18px; outline: none; box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: 0.3s; box-sizing: border-box;
        }
        .search-bar:focus { transform: scale(1.02); }
        
        #search-results {
            position: absolute; top: 110%; left: 0; right: 0; background: white;
            border-radius: 15px; text-align: left; color: #333; z-index: 100;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2); display: none; overflow: hidden;
        }
        .search-item { padding: 15px 20px; border-bottom: 1px solid #eee; cursor: pointer; transition: 0.2s; }
        .search-item:hover { background: #f0f4f0; }
        .search-item h4 { margin: 0; color: var(--primary); }
        .search-item p { margin: 5px 0 0; font-size: 13px; color: #666; font-family: 'Sarabun'; }

        /* Buttons */
        .btn-group { margin-top: 40px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .btn { padding: 15px 40px; text-decoration: none; border-radius: 50px; font-weight: bold; transition: 0.4s; display: flex; align-items: center; gap: 10px; }
        .btn-login { background: var(--secondary); color: #1b5e20; }
        .btn-map-guest { background: white; color: var(--primary); }
        .btn:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); opacity: 0.9; }

        /* Knowledge Section */
        .section-title { text-align: center; margin: 60px 0 40px; color: var(--primary); font-size: 2rem; }
        .grid-container { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
            gap: 30px; max-width: 1200px; margin: 0 auto; padding: 0 20px 80px; 
        }
        .info-card { 
            background: white; border-radius: 25px; overflow: hidden; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.05); transition: 0.4s; border: 1px solid rgba(0,0,0,0.03);
        }
        .info-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .info-card img { width: 100%; height: 240px; object-fit: cover; }
        .info-content { padding: 25px; }

        /* Stats Bar Style */
        .stats-section { background: #fff; padding: 60px 20px; border-top: 1px solid #eee; }
        .stats-container { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center; }
        .stat-card { padding: 20px; transition: 0.3s; }
        .stat-card i { font-size: 2.5rem; color: var(--primary); margin-bottom: 15px; display: block; }
        .stat-number { font-size: 2.8rem; font-weight: bold; color: #222; line-height: 1; }
        .stat-label { font-family: 'Sarabun'; color: #666; font-size: 1rem; margin-top: 10px; display: block; }
        .online-dot { height: 12px; width: 12px; background-color: #4caf50; border-radius: 50%; display: inline-block; margin-right: 5px; animation: pulse 1.5s infinite; }
        
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.7; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.7; }
        }

        @media (max-width: 768px) { .hero h1 { font-size: 2.2rem; } }
    </style>
</head>
<body>

    <header class="hero">
        <h1>üåø ‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</h1>
        <p>‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å AI</p>
        
        <div class="search-container">
            <input type="text" id="searchInput" class="search-bar" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì, ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å, ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£...">
            <div id="search-results"></div>
        </div>

        <div class="btn-group">
            <a href="/login" class="btn btn-login"><i class="fas fa-id-badge"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</a>
            <a href="/dashboard?view_only=true" class="btn btn-map-guest"><i class="fas fa-globe-asia"></i> ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏Å‡∏±‡∏î</a>
        </div>
    </header>

    <main class="content">
        <h2 class="section-title">‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
        
        <div class="grid-container">
            <div class="info-card">
                <img src="{{ url_for('static', filename='imges/‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô.jpg') }}" alt="‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì" onerror="this.src='https://image.makewebeasy.net/makeweb/0/fK7vD2WfK/DefaultData/makhean_1.jpg'">
                <div class="info-content">
                    <h3>‚ú® ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏£‡∏û‡∏Ñ‡∏∏‡∏ì</h3>
                    <p>‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô‡∏°‡∏µ‡∏§‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏ú‡πá‡∏î‡∏£‡πâ‡∏≠‡∏ô ‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≠‡∏°‡∏ã‡πà‡∏≤ ‡∏ä‡πà‡∏ß‡∏¢‡∏Ç‡∏±‡∏ö‡∏•‡∏° ‡πÅ‡∏Å‡πâ‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</p>
                </div>
            </div>

            <div class="info-card">
                <img src="{{ url_for('static', filename='imges/‡∏•‡∏≤‡∏ö.jpg') }}" alt="‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£" onerror="this.src='https://f.ptcdn.info/648/055/000/p2m0f0p1z1X0T1p1N0-o.jpg'">
                <div class="info-content">
                    <h3>üç≤ ‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏ô‡∏∑‡∏≠</h3>
                    <p>‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á "‡∏•‡∏≤‡∏ö‡∏Ñ‡∏±‡πà‡∏ß" ‡πÅ‡∏•‡∏∞ "‡πÅ‡∏Å‡∏á‡πÅ‡∏Ñ" ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏°‡∏µ‡∏°‡∏¥‡∏ï‡∏¥ ‡πÄ‡∏ú‡πá‡∏î‡∏õ‡∏£‡πà‡∏≤‡∏ï‡∏¥‡∏î‡∏•‡∏¥‡πâ‡∏ô ‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏´‡∏°‡∏≤‡∏•‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏´‡∏≠‡∏°‡∏ô‡∏ß‡∏•‡∏Å‡∏ß‡πà‡∏≤</p>
                </div>
            </div>

            <div class="info-card">
                <img src="{{ url_for('static', filename='imges/‡∏õ‡∏•‡∏π‡∏Å.jpg') }}" alt="‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å" onerror="this.src='https://puechkaset.com/wp-content/uploads/2015/12/%E0%B8%A1%E0%B8%B0%E0%B9%81%E0%B8%82%E0%B9%87%E0%B8%A7%E0%B9%88%E0%B8%993.jpg'">
                <div class="info-content">
                    <h3>üå± ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</h3>
                    <p>‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÑ‡∏î‡πâ‡∏î‡∏µ‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏™‡∏π‡∏á 600 ‡πÄ‡∏°‡∏ï‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏ä‡∏≠‡∏ö‡∏î‡∏¥‡∏ô‡∏£‡πà‡∏ß‡∏ô‡∏ã‡∏∏‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏î‡∏µ ‡∏û‡∏ö‡∏°‡∏≤‡∏Å‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ö ‡∏≠.‡∏õ‡∏á ‡πÅ‡∏•‡∏∞ ‡∏≠.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏Ñ‡∏≥ ‡∏à.‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</p>
                </div>
            </div>
        </div>

        <section class="stats-section">
            <div class="stats-container">
                <div class="stat-card">
                    <i class="fas fa-images"></i>
                    <span class="stat-number">{{ total_images }}</span>
                    <span class="stat-label">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                </div>
                <div class="stat-card">
                    <i class="fas fa-map-marked-alt"></i>
                    <span class="stat-number">{{ total_markers }}</span>
                    <span class="stat-label">‡∏´‡∏°‡∏∏‡∏î‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</span>
                </div>
                <div class="stat-card">
                    <i class="fas fa-user-friends"></i>
                    <span class="stat-number">{{ total_users }}</span>
                    <span class="stat-label">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                </div>
                <div class="stat-card">
                    <i class="fas fa-signal"></i>
                    <span class="stat-number"><span class="online-dot"></span>{{ online_users }}</span>
                    <span class="stat-label">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
                </div>
            </div>
        </section>
    </main>

    <script>
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('search-results');

        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö API /api/search
        searchInput.addEventListener('input', async (e) => {
            const query = e.target.value;
            if (query.length < 1) {
                searchResults.style.display = 'none';
                return;
            }

            try {
                const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
                const data = await response.json();

                if (data.length > 0) {
                    searchResults.innerHTML = data.map(item => `
                        <div class="search-item" onclick="location.href='${item.link}'">
                            <h4>${item.title}</h4>
                            <p>${item.desc}</p>
                        </div>
                    `).join('');
                    searchResults.style.display = 'block';
                } else {
                    searchResults.innerHTML = '<div class="search-item">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>';
                    searchResults.style.display = 'block';
                }
            } catch (err) {
                console.error('Search error:', err);
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ñ‡πâ‡∏≤ API ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°
                searchResults.innerHTML = '<div class="search-item">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...</div>';
                searchResults.style.display = 'block';
            }
        });

        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target)) { searchResults.style.display = 'none'; }
        });
    </script>
</body>
</html>
