<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô</title>
    <style>
        body { display: flex; margin: 0; font-family: 'Sarabun', sans-serif; background: #f9f9f9; }
        .sidebar { width: 280px; background: #1b5e20; color: white; padding: 20px; min-height: 100vh; }
        .main { flex-grow: 1; padding: 40px; }
        .table-container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f1f8e9; color: #1b5e20; }
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 13px; text-decoration: none; }
        .btn-del { background: #ff5252; color: white; }
        .btn-view { background: #448aff; color: white; }
        .badge { background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3>üåø ‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô</h3>
        <p>‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå: <b>{{ role.upper() }}</b></p>
        <hr>
        <a href="/dashboard" style="color:white; text-decoration:none; display:block; padding:10px;">üó∫Ô∏è ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</a>
    </div>

    <div class="main">
        <h2>‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏∞‡πÅ‡∏Ç‡∏ß‡πà‡∏ô</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                        <th>‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏≥‡∏£‡∏ß‡∏à</th>
                        <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ (%)</th>
                        <th>‡∏ú‡∏π‡πâ‡∏™‡∏≥‡∏£‡∏ß‡∏à / ‡πÄ‡∏ß‡∏•‡∏≤</th>
                        <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>
                <tbody>
                    {% for d in data %}
                    <tr>
                        <td>
                            <a href="/static/uploads/{{ d.img_name }}" target="_blank">
                                <img src="/static/uploads/{{ d.img_name }}" width="80" style="border-radius:6px; box-shadow: 2px 2px 5px rgba(0,0,0,0.1);">
                            </a>
                        </td>
                        <td>{{ d.lat }}, {{ d.lng }}</td>
                        <td><span class="badge">{{ d.accuracy }} %</span></td>
                        <td>
                            <strong>{{ d.surveyor }}</strong><br>
                            <small style="color: #888;">{{ d.timestamp }}</small>
                        </td>
                        <td>
                            {% if role == 'admin' %}
                                <button class="btn btn-del">üóëÔ∏è ‡∏•‡∏ö</button>
                                <button class="btn btn-view">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            {% else %}
                                <button class="btn btn-view">üîç ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                    {% if not data %}
                    <tr>
                        <td colspan="5" style="text-align:center; color:#999; padding:50px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>